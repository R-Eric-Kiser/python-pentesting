# https://systemweakness.com/python-penetration-testing-running-multiple-scripts-on-multiple-devices-simultaneously-1554109ff09c
# Script that uses Ansible to run "Multiple Scripts on Multiple Devices Simultaneously"

import ansible_runner

# Prompt user for the location of the python scripts and the target systems
script_location = input("Enter the location of the python scripts (comma-separated): ")
target_systems = input("Enter the target Linux systems (comma-separated): ")

# Split the input strings into lists
scripts = [s.strip() for s in script_location.split(",")]
hosts = [h.strip() for h in target_systems.split(",")]

# Define the Ansible playbook that runs the python scripts
playbook = {
    'name': 'Run Python Scripts on Linux Systems',
    'hosts': hosts,
    'tasks': [
        {
            'name': f'Run script {s}',
            'command': f'python {s}'
        } for s in scripts
    ]
}

# Create an instance of the ansible-runner
runner = ansible_runner.Runner(playbook=playbook, inventory=None)

# Run the playbook
runner.run()
